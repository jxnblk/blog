{"path":"blog/two-steps-forward","title":"Two Steps Forward, One Step Back","date":"2020-03-06T00:00:00.000Z","excerpt":"Building UI with design constraints from utlity CSS to CSS-in-JS","html":"<p>If you've ever seen code that looks like this, I'm sorry:</p>\n<pre><code class=\"language-html\">&#x3C;div class=\"p3 bold white bg-blue\">\n  I'm sorry\n&#x3C;/div>\n</code></pre>\n<p>If you've ever seen code that looks like this, you're welcome:</p>\n<pre><code class=\"language-jsx\">&#x3C;Box\n  padding={3}\n  fontWeight='bold'\n  color='white'\n  bg='blue'>\n  Hello\n&#x3C;/Box>\n</code></pre>\n<p>Back in 2013, <a href=\"https://twitter.com/mrmrs_\">Adam Morse</a> and I were following along the incredible work that <a href=\"https://mobile.twitter.com/stubbornella/\">Nicole Sullivan</a> and others like <a href=\"https://github.com/necolas\">Nicolas Gallagher</a> were doing with Object-Oriented CSS (OOCSS).\nOur explorations around working with CSS-related tech-debt led to the creation of <a href=\"https://basscss.com\">Basscss</a> and <a href=\"https://tachyons.io\">Tachyons</a> and the birth of \"Utility CSS\".\nThese libraries inspired other design systems such as Buzzfeed's <a href=\"https://solid.buzzfeed.com/\">Solid</a> and GitHub's <a href=\"https://primer.style/css/\">Primer CSS</a>. Even <a href=\"https://getbootstrap.com\">Bootstrap</a> eventually added more utility-centric styles.</p>\n<p>This methodology became known by many names, including <em>Atomic CSS</em>, <em>Functional CSS</em>, and <em>Utlity CSS</em>,\nbut I've started referring to it as <em>Atomic/Functional/Utility CSS</em> or AFUCSS.\nThis sort of sounds like <em>Hey, F you!</em>, which is a pretty <a href=\"https://medium.com/buzzfeed-design/how-i-learned-to-stop-worrying-and-love-the-atomic-class-98d6ccc45781#.yqnsfkbx2\">typical response</a> when most people first encounter this flavor of CSS.</p>\n<h2>What problems did this solve?</h2>\n<p>Whatever your opinion on this methodology was, it tended to help with a few common problems of working with CSS at scale.</p>\n<ul>\n<li>It connected elements directly to styles, avoiding selector abstractions and the need to name things.</li>\n<li>It encouraged designers and developers to use scales and constraints on margin, padding, font sizes, colors, and other properties.</li>\n<li>It helped mitigate \"append-only\" stylesheets by reusing styles.</li>\n<li>It avoided some of the pitfalls of \"specificity wars\" incurred by the cascade.</li>\n<li>Although it had a learning curve, once you had internalized one of the many implementations, it could increase your development velocity.</li>\n</ul>\n<p>Around the same time, we started working on <a href=\"https://cssstats.com\">CSS Stats</a>,\nwhich helped validate some of our hypotheses about CSS filesize and front-end performance.\nApplying this methodology to production web applications at the time helped shave of hundreds of kilobytes of CSS that was being shipped to end users.</p>\n<h2>What did it fail to do?</h2>\n<p>Despite Tachyons' popularity, no single library ever took over\nthe industry at a level that would negate the steep learning curve involved.\nThis meant that not only did developers have to learn a new methodology, but also an inevitably large custom classname API.</p>\n<p>CSS is a powerful and nuanced language, but utility CSS can never fully replace it.\nEventually, you'll need to add one-off styles that just aren't covered by the library you're using, and there isn't always a clear way to extend what you're working with.\nWithout a clear way to handle things like this, developers\ntend to add inconsistent hacks and append-only styles.</p>\n<p>As any utility-based CSS library grows, so does the amount of CSS you ship to your users,\nleaving you reliant on more build tools to remove styles that you were never going to use in the first place.\nWhile it was generally better than other methodologies at the time with regard to CSS filesize, it still wasn't ideal.</p>\n<p>It's also worth noting that this methodology was created before React was released\nand was intended for use in template-based user interfaces, including Rails and PHP.\nIt was never designed for functional component-based UI and doesn't take advantage of this new paradigm.</p>\n<h2>Components</h2>\n<p>With the introduction of component-based UI libraries like React,\nthe promise of a better way to handle authoring CSS at scale was on the horizon.\nAfter Christopher \"Vjeux\" Chedeau gave a talk titled <a href=\"https://vimeo.com/116209150\">CSS in your JS</a> in 2015, the React community began exploring the possibilities of combining styles with components, which resulted in a cornucopia of new libraries for authoring CSS in JavaScript.\nFor an excellent writeup of why you would want to do this, see <a href=\"https://gist.github.com/threepointone/731b0c47e78d8350ae4e105c1a83867d\">Sunil Pai's response to Jonathan Snook</a>.</p>\n<h2>Two steps forward</h2>\n<p>CSS-in-JS libraries help solve a lot of the same issues Utility-based CSS methodologies were focused on (and more) in a <em>much</em> better way.\nThey connect styles directly to elements without needing to name things or create abstractions in class selectors.\nThey avoid append-only stylesheets with encapsulation and hashed classnames.\nThese libraries work with existing build tools, allowing for code splitting, lazy loading, and dead code elimination with virtually zero effort,\nand they don't require additional tools like Sass or PostCSS.\nMany libraries also include CSS performance optimizations, such as <em>critical CSS</em>, enabled by default so that developers don't need additional tooling or even need to think about them.</p>\n<p>No wonder people have been raving about this.</p>\n<p>Another great thing about CSS-in-JS libraries, is that they're based on standard CSS syntax, properties, and values.\nThey remove the need for cryptic, non-standard APIs and dramatically reduce the barrier to entry when compared to utility-based CSS.</p>\n<h2>One step back</h2>\n<p>While CSS-in-JS libraries help with a lot of issues,\nsome of the key benefits to libraries like Basscss and Tachyons\ngot lost in the mix.\nInstead of using design constraints to define styles, developers are left with open-ended tools that tend to encourage one-off styles.\nThe learning curve was reduced, but developers were left with more choices to make.</p>\n<h2>A new system</h2>\n<p>With the new ecosystem of CSS-in-JS libraries, I began exploring\nways to incorporate design constraints in components.\nThis resulted in <a href=\"https://rebassjs.org\">Rebass</a> in 2015, then <a href=\"https://styled-system.com\">Styled System</a> in 2017.\nRebass introduced the notion of using style props that mapped to commonly used CSS properties and was an early attempt at recreating some of the developer ergonomics from Basscss.\nStyled System abstracted these style props into utility functions for use in libraries like <a href=\"https://styled-components.com\">Styled Components</a>,\nallowing you to create your own Rebass-like components.\nRather than applying a mixed bag of classnames to a component, Styled System promotes <em>style as a function of props</em> with a sort of <em>learn-once-use-everywhere</em> API.</p>\n<p>Many teams use libraries like Styled System to create component libraries and design systems to great success.\n<em><a href=\"https://chakra-ui.com\">Chakra UI</a></em>,\nGitHub's <em><a href=\"https://primer.style/components/\">Primer Components</a></em>,\nArtsy's <em><a href=\"https://palette.artsy.net/\">Palette</a></em>,\nSproutSocial's <em><a href=\"https://seeds.sproutsocial.com/\">Seeds</a></em>,\nand Modulz's <em><a href=\"https://radix.modulz.app/\">Radix</a></em>\nall use Styled System to create components that use styles defined in <em>themes</em> with a common props API.\nThese help teams efficiently build UI with consistent branding and a common design language.</p>\n<h2>Outside the <code>&#x3C;Box /></code></h2>\n<p>Styled System is great for teams that have the time and resources to build out a custom component library,\nbut it does require some effort to start using.\nInstead of <em>one <code>&#x3C;Box /></code> to rule them all,</em>\nmany of these component libraries have their own custom versions\nthat require documentation, and limit <a href=\"/blog/interoperability\">interoperability</a>.\nHow can the concepts encoded in libraries like Styled System and the component libraries it powers be extended to designers and developers without the resources to build a custom component library,\nwhile making it even easier for large teams to take advantage of network effects in the ecosystem?\nNo one wants another off-the-shelf component library, do they?</p>\n<h2>The Design Graph</h2>\n<p>Instead of building <em>yet another</em> component library, what would a framework for styling modern component-based applications look like?\nLeveraging the concepts of a <a href=\"/blog/design-graph\"><em>Design Graph</em></a>, design constraints, and a standard <a href=\"https://theme-ui.com/theme-spec\">theme specification</a> for other library authors to follow,\n<a href=\"https://theme-ui.com\">Theme UI</a>\nis the next step up this ladder of abstraction.</p>\n<p>Although it's loosely based on similar concepts from utility CSS methodologies,\nTheme UI gets rid of the cryptic, non-standard APIs and syntax, the lack of interoperability, the need for separate build tools, and the steep learning curve found in libraries like Tachyons.\nIt keeps the coupling of styles to elements, readability, developer ergonomics of making changes in situ,\nand adds a more powerful constraint-based system for managing styles.</p>\n<h2>A superset of CSS-in-JS</h2>\n<p>Rather than memorizing hundreds of class selectors that only represent a subset of the CSS language, or a handful of style props, Theme UI gives you a superset of CSS that can be applied to any element with its <code>sx</code> prop.\nTheme-based values can be applied to common CSS properties for things like typography, color, and layout, and any bespoke, one-off styles can be added where needed, serving as an <em>escape hatch</em>.</p>\n<p><strong>Utility CSS creates a subset of CSS, with a custom syntax.\nThe <code>sx</code> prop is a superset of CSS that uses standard syntax.</strong></p>\n<p>Naming things is hard, and the <code>sx</code> prop lets you style any application\nwithout needing to name things like class selectors and components.\nAs my friend and colleague <a href=\"https://twitter.com/4lpine\">John Otander</a> puts it,\n<em>\"Fuck naming shit when you don’t have to.\"</em></p>\n<p>Theme UI's <code>sx</code> prop is intended to help maintain a minimal API surface area.\nMost properties used in this prop are the same as standard CSS,\nwith optional, additional ways to use values for these properties.\nInstead of each component having its own custom set of style props, <em>every</em> element can be styled with the same <code>sx</code> prop.\nComponent variants are also written in the same format.\nWriting styles in JS object notation might be somewhat new, but if you know JavaScript, you likely already know the syntax.</p>\n<!--\n- superset of css\n- naming things\n- collocated styles + readability\n- minimal API surface area\n-->\n<h2>Don't take my word for it</h2>\n<p>Tons of people are already taking advantage of the <em>Design Graph</em> with Theme UI\nto build themes, applications, and other tools.</p>\n<ul>\n<li><a href=\"https://docz.site\">Docz</a> uses Theme UI to let you customize the styles for your documentation site.</li>\n<li><a href=\"https://flex.arshad.io/\">Flex</a> is a markdown/MDX based page builder that uses Theme UI for theming.</li>\n<li><a href=\"https://novela.narative.co/\">Novela</a> is a beautiful Gatsby theme for blogging, built with Theme UI.</li>\n<li><a href=\"https://hackathons.hackclub.com/\">Hack Club</a> connects you to high school hackathons and is styled with Theme UI.</li>\n<li>Plus a <a href=\"https://twitter.com/jxnblk/status/1235658542306246657\">whole lot more</a></li>\n</ul>\n<p>If you've built something with Theme UI, I'd love to hear about it.</p>\n<h2>Demand better</h2>\n<p>If you're building an application with React in 2020,\ndon't settle for CSS methologies from 2013.\nDemand more for your team,\nand help me build the future of styling for the Web.</p>\n<hr>\n<p><strong>Further reading:</strong></p>\n<ul>\n<li><a href=\"http://mrmrs.cc/writing/scalable-css/\">CSS and Scalability</a></li>\n<li><a href=\"/blog/patterns-for-style-composition-in-react/\">Patterns for Style Composition in React</a></li>\n<li><a href=\"https://jon.gold/2015/07/functional-css/\">Functional Programming, CSS, and your sanity</a></li>\n<li><a href=\"https://johno.com/styling-themes/\">Styling themes</a></li>\n<li><a href=\"https://johno.com/guessable/\">Guessable</a></li>\n</ul>\n<p><em>Thanks to <a href=\"https://twitter.com/4lpine\">John Otander</a> and <a href=\"https://twitter.com/broccolini\">Diana Mounter</a></em></p>\n<!--\n- Reference:\n  - http://mrmrs.cc/writing/scalable-css/\n  - https://gist.github.com/threepointone/731b0c47e78d8350ae4e105c1a83867d\n  - https://mobile.twitter.com/chantastic/status/1227262007469981703\n- From Johno\n  - tech debt was measurable in CSS Stats - data-driven\n  - theming is an afterthought in most css-in-js libs\n  - style as a function of props (not a mix of classnames)\n  - theme-ui avoids the need to name things (selectors, components)\n  - \"Fuck naming shit when you don’t have to\"\n- Theme UI things\n  - https://mobile.twitter.com/samjbmason/status/1235537136335622145\n  - https://theme-ui-gallery.netlify.com/\n  - https://mobile.twitter.com/gill_kyle/status/1212508600007938048\n  - https://mobile.twitter.com/PaulieScanlon/status/1234434804885655554\n  - https://mobile.twitter.com/dandenney/status/1233123707654148096\n  - https://gatsby-theme-terminal.netlify.com/\n  - https://mobile.twitter.com/atav1k/status/1230780663047036928\n  - https://mobile.twitter.com/atav1k/status/1228481206813020161\n  - Docz\n  - Narative Novela\n  - Flex: https://flex.arshad.io/\n  - https://mobile.twitter.com/tuistio/status/1235658946540601345\n-->\n"}